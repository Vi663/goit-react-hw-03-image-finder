(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{13:function(t,e,a){t.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__g4A6I",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__3Cx5T"}},23:function(t,e,a){t.exports={imageGallery:"ImageGallery_imageGallery__29yzB"}},24:function(t,e,a){t.exports={button:"Button_button__1sZNc"}},4:function(t,e,a){t.exports={Searchbar:"Searchbar_Searchbar__1Rtl7",SearchForm:"Searchbar_SearchForm__1QKKU",SearchFormButton:"Searchbar_SearchFormButton__3cq6N",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__3MEL8",SearchFormInput:"Searchbar_SearchFormInput__1c27g"}},52:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(5),o=a.n(r),c=a(12),s=a.n(c),i=a(22),u=a(6),l=a(7),h=a(9),m=a(8),p=a(4),b=a.n(p),d=a(3),f=a(1),g=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={input:""},t.clearInput=function(){t.setState({input:""})},t.handleInputChange=function(e){t.setState({input:e.currentTarget.value.toLowerCase()})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.input),""===t.state.input.trim()&&d.b.error("Please, fulfill the search form")},t}return Object(l.a)(a,[{key:"render",value:function(){return Object(f.jsx)("header",{className:b.a.Searchbar,children:Object(f.jsxs)("form",{onSubmit:this.handleSubmit,className:b.a.SearchForm,children:[Object(f.jsx)("button",{type:"submit",className:b.a.SearchFormButton,children:Object(f.jsx)("span",{className:b.a.SearchFormButtonLabel,children:"Search"})}),Object(f.jsx)("input",{className:b.a.SearchFormInput,type:"text",value:this.state.input,placeholder:"Search images and photos",onChange:this.handleInputChange})]})})}}]),a}(n.Component),j=(a(31),a(32),a(23)),S=a.n(j);function y(t){var e=t.children;return Object(f.jsx)("ul",{className:S.a.imageGallery,children:e})}var I=a(13),_=a.n(I);function v(t){var e=t.response,a=t.onSelect;return e.map((function(t){return Object(f.jsx)("li",{className:_.a.imageGalleryItem,children:Object(f.jsx)("img",{onClick:function(){return a()},src:t.webformatURL,alt:t.id,className:_.a.imageGalleryItemImage})},t.id)}))}var x=a(24),O=a.n(x),w=function(t){var e=t.onHandleSubmit;return Object(f.jsx)("button",{onSubmit:function(){return e()},type:"submit",className:O.a.button,children:"Load more images"})},N=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={url:"pixabay.com/api/",key:"22593683-900dbddd4b86d221bedd65f3e",page:1,searchInput:"",apiResponse:null,status:"idle",isModalOpen:!1},t.toTop=function(){window.scrollBy({top:-window.pageYOffset,behavior:"smooth"})},t.toBottom=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},t.setStatus=function(){"pending"===t.state.status?d.b.loading("Loading"):"resolved"===t.state.status?d.b.success("found!"):"rejected"===t.state.status&&d.b.error("Not found!")},t.onHandleSubmit=function(e){t.setState({searchInput:e})},t.onImageClick=function(t){},t.onLoadNext=function(){t.setState((function(t){return{page:t.page+1}})),t.fetchImages(),t.toBottom()},t}return Object(l.a)(a,[{key:"fetchImages",value:function(){var t=Object(i.a)(s.a.mark((function t(){var e,a,n,r,o,c=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state,a=e.url,n=e.page,r=e.key,o=e.searchInput,t.next=3,fetch("https://".concat(a,"?q=").concat(o,"&page=").concat(n,"&key=").concat(r,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.json()})).then((function(t){console.log(t),0===t.total?c.setState({status:"rejected"}):c.setState({apiResponse:t,status:"resolved"})})).catch((function(t){return c.setState({status:"rejected"})}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t,e){e.searchInput!==this.state.searchInput&&(this.setState({status:"pending"}),this.fetchImages(),this.toBottom())}},{key:"render",value:function(){var t=this.state,e=t.status,a=t.apiResponse;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(g,{onSubmit:this.onHandleSubmit}),"resolved"===e&&Object(f.jsxs)(y,{children:[Object(f.jsx)(v,{response:a.hits,onSelect:this.onImageClick}),Object(f.jsx)(w,{onHandleSubmit:this.onLoadNext})]}),Object(f.jsx)(d.a,{theme:"colored"})]})}}]),a}(n.Component);o.a.render(Object(f.jsx)(N,{}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.dd9940fb.chunk.js.map